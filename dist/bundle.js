!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=function(){function t(t,e){this.level=t,this.view=e,this.isGameWin=!1,this.isGameOver=!1,this.score=0,this.actors=t.actors,this.bricks=t.actors.filter(function(t){return"brick"===t.type}),this.scoreLabel=this.actors.filter(function(t){return"scoreLabel"===t.id})[0],this.updateScore()}return t.prototype.update=function(t){var e=this;this.isGameOver||this.actors.forEach(function(i){return i.update(e,t)})},t.prototype.isCollidesWithBricks=function(t){for(var e=null,i=!1,r=0;r<this.bricks.length;r++){var s=this.bricks[r],o=t.pos.x+t.radius>s.pos.x&&t.pos.x-t.radius<s.pos.x+s.size.x,n=t.pos.y+t.radius>s.pos.y&&t.pos.y-t.radius<s.pos.y+s.size.y;if(o&&n){i=!0,e=s;break}}return e&&(this.score++,this.updateScore(),this.actors=this.actors.filter(function(t){return t!==e}),this.bricks=this.bricks.filter(function(t){return t!==e}),0===this.bricks.length&&(this.isGameWin=!0)),i},t.prototype.updateScore=function(){this.scoreLabel.text="Score: "+this.score},t.prototype.getPlayer=function(){return this.actors.filter(function(t){return"player"===t.type})[0]},t.prototype.findActor=function(t){return this.actors.filter(function(e){return e.id===t})[0]},t}(),s=function(){function t(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}return t.prototype.draw=function(t){var e=this;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),t.forEach(function(t){return t.draw(e.ctx)})},t}();var o=function(){return function(t,e){this.x=t,this.y=e}}(),n=function(){function t(t,e,i,r){this.id=t,this.pos=e,this.size=i,this.color=r,this.type="rect"}return t.prototype.draw=function(t){t.beginPath(),t.rect(this.pos.x,this.pos.y,this.size.x,this.size.y),t.fillStyle=this.color,t.fill(),t.closePath()},t.prototype.update=function(t){},t}(),a=function(){function t(t,e,i){this.id=t,this.pos=e,this.color=i,this.type="label"}return t.prototype.draw=function(t){t.font="16px Roboto",t.fillStyle=this.color,t.fillText(this.text,this.pos.x,this.pos.y)},t.prototype.update=function(t){},t}(),c=function(){function t(t,e,i){this.id=t,this.pos=e,this.size=i,this.type="player",this.speedX=7}return t.prototype.draw=function(t){t.beginPath(),t.rect(this.pos.x,this.pos.y,this.size.x,this.size.y),t.fillStyle="#4c9cff",t.fill(),t.closePath(),t.beginPath(),t.rect(this.pos.x,this.pos.y,this.size.x,2),t.fillStyle="#000000",t.fill(),t.closePath()},t.prototype.update=function(t,e){e.ArrowLeft&&this.pos.x>0&&(this.pos.x-=this.speedX),e.ArrowRight&&this.pos.x<t.view.canvas.width-this.size.x&&(this.pos.x+=this.speedX)},t}(),u=function(){function t(t,e,i){this.id=t,this.pos=e,this.speed=i,this.type="ball",this.radius=10}return t.prototype.draw=function(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI),t.fillStyle="#ff4284",t.fill(),t.closePath()},t.prototype.update=function(t){var e=t.view.canvas,i=t.findActor("topBorder").pos.y,r=this.pos.x,s=this.pos.y,o=t.getPlayer();(r<this.radius||r>e.width-this.radius)&&(this.speed.x=-this.speed.x),t.isCollidesWithBricks(this)&&(this.speed.y=-this.speed.y),s<i+this.radius&&(this.speed.y=-this.speed.y),s+this.speed.y>o.pos.y-this.radius&&s+this.speed.y<o.pos.y&&r+this.radius>o.pos.x&&r-this.radius<o.pos.x+o.size.x&&(this.speed.y=-this.speed.y),s>e.height&&(t.isGameOver=!0),this.pos.x+=this.speed.x,this.pos.y+=this.speed.y},t}(),h=function(){function t(t){this.view=t}return t.prototype.createUI=function(){return[new n("topBorder",new o(0,25),new o(this.view.canvas.width,1),"#3a3a39"),new a("scoreLabel",new o(8,20),"#4c9cff")]},t.prototype.createPlayer=function(){var t=this.view.canvas.width/2-50;return new c("player",new o(t,465),new o(100,15))},t.prototype.createBall=function(){var t=Math.random()*(this.view.canvas.width-50);new o(Math.random()>.5?3:-3,3);return new u("ball",new o(t,200),new o(3,3))},t}(),p=function(){function t(t,e,i){this.id=t,this.pos=e,this.color=i,this.type="brick"}return t.prototype.draw=function(t){t.beginPath(),t.rect(this.pos.x,this.pos.y,this.size.x,this.size.y),t.fillStyle=this.color,t.fill(),t.closePath()},t.prototype.update=function(t){},t}();p.prototype.size=new o(77,20);var f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),l=function(t){function e(e){var i=t.call(this,e)||this;return i.actors=[i.createPlayer(),i.createBall()].concat(i.createUI(),i.createBricks()),i}return f(e,t),e.prototype.createBricks=function(){for(var t=[],e=0;e<5;e++)for(var i=0;i<6;i++){var r=new p("brick#"+e+i,new o((5+p.prototype.size.x)*i+5,30+(5+p.prototype.size.y)*e+5),"#"+((1<<24)*Math.random()|0).toString(16));t.push(r)}return t},e}(h);(new(function(){function t(){this.view=new s(document.getElementById("gameCanvas"));var t=new l(this.view);this.state=new r(t,this.view),this.keys=function(t){var e=Object.create(null);function i(i){t.indexOf(i.key)>=0&&(e[i.key]="keydown"===i.type,i.preventDefault())}return window.addEventListener("keydown",i),window.addEventListener("keyup",i),e}(["ArrowLeft","ArrowRight"])}return t.prototype.start=function(){var t=this,e=setInterval(function(){t.view.draw(t.state.actors),t.state.update(t.keys),t.state.isGameWin&&(t.view.draw(t.state.actors),clearInterval(e),setTimeout(t.gameWin,100)),t.state.isGameOver&&(t.view.draw(t.state.actors),clearInterval(e),setTimeout(t.gameOver,100))},10)},t.prototype.gameWin=function(){alert("Victory! You have destroyed all bricks!"),document.location.reload()},t.prototype.gameOver=function(){alert("GAME OVER"),document.location.reload()},t}())).start()}]);